<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Camera Trap Data Analysis • compbio2020</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Camera Trap Data Analysis">
<meta property="og:description" content="compbio2020">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">compbio2020</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/00_Syllabus_and_Expectations.html">Syllabus</a>
    </li>
    <li>
      <a href="../articles/01_Getting_Started_with_R.html">Starting with R</a>
    </li>
    <li>
      <a href="../articles/02_Starting_with_Data.html">Starting with data</a>
    </li>
    <li>
      <a href="../articles/03_Manipulating_Data.html">Manipulating, analyzing and exporting data with tidyverse</a>
    </li>
    <li>
      <a href="../articles/04-plotting.html">Data visualization with ggplot2</a>
    </li>
    <li>
      <a href="../articles/05_Functions.html">Functions and repeatability</a>
    </li>
    <li>
      <a href="../articles/06_Exploration_Setup.html">Exploration</a>
    </li>
    <li>
      <a href="../articles/06_Project_Structuring.html">Project Structuring</a>
    </li>
    <li>
      <a href="../articles/08_linear_models.html">Introduction to Linear Models: Building and Interpreting Linear Regressions</a>
    </li>
    <li>
      <a href="../articles/09_Tree_of_life.html">GeneticData</a>
    </li>
    <li>
      <a href="../articles/10_GBIF_and_Location.html">GBIF And Spatial Data</a>
    </li>
    <li>
      <a href="../articles/11_iNEXT.html">Camera Trap Data Analysis</a>
    </li>
    <li>
      <a href="../articles/HomeworkFive.html">Homework Five</a>
    </li>
    <li>
      <a href="../articles/HomeworkSix.html">HomeworkSix</a>
    </li>
    <li>
      <a href="../articles/Simulation.html">Simulations</a>
    </li>
    <li>
      <a href="../articles/bonus_tables.html">Tables.Rmd</a>
    </li>
    <li>
      <a href="../articles/homework_0.html">How to Do Homework</a>
    </li>
    <li>
      <a href="../articles/homework_1.html">Homework One</a>
    </li>
    <li>
      <a href="../articles/homework_2.html">Homework Two</a>
    </li>
    <li>
      <a href="../articles/homework_3.html">Homework Three</a>
    </li>
    <li>
      <a href="../articles/homework_4.html">Homework Four</a>
    </li>
    <li>
      <a href="../articles/homework_5.html">Homework Five: Functions</a>
    </li>
    <li>
      <a href="../articles/homework_6.html">HomeworkSix.Rmd</a>
    </li>
    <li>
      <a href="../articles/homework_7.html">Homework Seven</a>
    </li>
    <li>
      <a href="../articles/project_final.html">Project: Final</a>
    </li>
    <li>
      <a href="../articles/project_one.html">ProjectOne</a>
    </li>
    <li>
      <a href="../articles/project_three.html">ProjectThree</a>
    </li>
    <li>
      <a href="../articles/project_two.html">Project Two</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Camera Trap Data Analysis</h1>
                        <h4 data-toc-skip class="author">Teague O’Mara
and April Wright</h4>
            
            <h4 data-toc-skip class="date">10/22/2020</h4>
      
      
      <div class="hidden name"><code>11_iNEXT.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">knitr</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/knitr/man/opts_chunk.html" class="external-link">opts_chunk</a></span><span class="op">$</span><span class="fu">set</span><span class="op">(</span>echo <span class="op">=</span> <span class="cn">TRUE</span>, error<span class="op">=</span><span class="cn">TRUE</span>, message<span class="op">=</span><span class="cn">FALSE</span>, warning<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span></span>
<span><span class="co">#Note that this function checks for the packages required for the exercise that are listed in the vector below. If a package is not present, then it will automatically install for the user.</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"r-spatial/mapview"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Downloading GitHub repo r-spatial/mapview@HEAD</span></span></code></pre>
<pre><code><span><span class="co">## wk          (0.9.0   -&gt; 0.9.2  ) [CRAN]</span></span>
<span><span class="co">## e1071       (1.7-13  -&gt; 1.7-14 ) [CRAN]</span></span>
<span><span class="co">## fastmap     (1.1.1   -&gt; 1.2.0  ) [CRAN]</span></span>
<span><span class="co">## promises    (1.2.1   -&gt; 1.3.0  ) [CRAN]</span></span>
<span><span class="co">## later       (1.3.1   -&gt; 1.3.2  ) [CRAN]</span></span>
<span><span class="co">## colorspace  (2.1-0   -&gt; 2.1-1  ) [CRAN]</span></span>
<span><span class="co">## systemfonts (1.0.5   -&gt; 1.1.0  ) [CRAN]</span></span>
<span><span class="co">## munsell     (0.5.0   -&gt; 0.5.1  ) [CRAN]</span></span>
<span><span class="co">## farver      (2.1.1   -&gt; 2.1.2  ) [CRAN]</span></span>
<span><span class="co">## htmltools   (0.5.6.1 -&gt; 0.5.8.1) [CRAN]</span></span>
<span><span class="co">## units       (0.8-4   -&gt; 0.8-5  ) [CRAN]</span></span>
<span><span class="co">## s2          (1.1.4   -&gt; 1.1.7  ) [CRAN]</span></span>
<span><span class="co">## DBI         (1.1.3   -&gt; 1.2.3  ) [CRAN]</span></span>
<span><span class="co">## terra       (1.7-46  -&gt; 1.7-78 ) [CRAN]</span></span>
<span><span class="co">## sp          (2.1-1   -&gt; 2.1-4  ) [CRAN]</span></span>
<span><span class="co">## fs          (1.6.3   -&gt; 1.6.4  ) [CRAN]</span></span>
<span><span class="co">## sass        (0.4.7   -&gt; 0.4.9  ) [CRAN]</span></span>
<span><span class="co">## cachem      (1.0.8   -&gt; 1.1.0  ) [CRAN]</span></span>
<span><span class="co">## tinytex     (0.48    -&gt; 0.52   ) [CRAN]</span></span>
<span><span class="co">## bslib       (0.5.1   -&gt; 0.8.0  ) [CRAN]</span></span>
<span><span class="co">## highr       (0.10    -&gt; 0.11   ) [CRAN]</span></span>
<span><span class="co">## evaluate    (0.22    -&gt; 0.24.0 ) [CRAN]</span></span>
<span><span class="co">## yaml        (2.3.7   -&gt; 2.3.10 ) [CRAN]</span></span>
<span><span class="co">## rmarkdown   (2.25    -&gt; 2.27   ) [CRAN]</span></span>
<span><span class="co">## knitr       (1.45    -&gt; 1.48   ) [CRAN]</span></span>
<span><span class="co">## xfun        (0.40    -&gt; 0.46   ) [CRAN]</span></span>
<span><span class="co">## scales      (1.2.1   -&gt; 1.3.0  ) [CRAN]</span></span>
<span><span class="co">## htmlwidgets (1.6.2   -&gt; 1.6.4  ) [CRAN]</span></span>
<span><span class="co">## crosstalk   (1.2.0   -&gt; 1.2.1  ) [CRAN]</span></span>
<span><span class="co">## sfheaders   (0.4.3   -&gt; 0.4.4  ) [CRAN]</span></span>
<span><span class="co">## geometries  (0.2.3   -&gt; 0.2.4  ) [CRAN]</span></span>
<span><span class="co">## httpuv      (1.6.12  -&gt; 1.6.15 ) [CRAN]</span></span>
<span><span class="co">## uuid        (1.1-1   -&gt; 1.2-1  ) [CRAN]</span></span>
<span><span class="co">## svglite     (2.1.2   -&gt; 2.1.3  ) [CRAN]</span></span>
<span><span class="co">## sf          (1.0-14  -&gt; 1.0-16 ) [CRAN]</span></span>
<span><span class="co">## brew        (1.0-8   -&gt; 1.0-10 ) [CRAN]</span></span>
<span><span class="co">## leaflet     (2.2.1   -&gt; 2.2.2  ) [CRAN]</span></span>
<span><span class="co">## servr       (0.27    -&gt; 0.30   ) [CRAN]</span></span>
<span><span class="co">## satellite   (1.0.4   -&gt; 1.0.5  ) [CRAN]</span></span></code></pre>
<pre><code><span><span class="co">## Installing 39 packages: wk, e1071, fastmap, promises, later, colorspace, systemfonts, munsell, farver, htmltools, units, s2, DBI, terra, sp, fs, sass, cachem, tinytex, bslib, highr, evaluate, yaml, rmarkdown, knitr, xfun, scales, htmlwidgets, crosstalk, sfheaders, geometries, httpuv, uuid, svglite, sf, brew, leaflet, servr, satellite</span></span></code></pre>
<pre><code><span><span class="co">## Installing packages into '/private/var/folders/54/9kd8nf1x4fnft0ymvb11qmc80000gn/T/Rtmpie5FUp/temp_libpath3b62461540c7'</span></span>
<span><span class="co">## (as 'lib' is unspecified)</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">##   There are binary versions available but the source versions are later:</span></span>
<span><span class="co">##             binary  source needs_compilation</span></span>
<span><span class="co">## wk           0.9.1   0.9.2              TRUE</span></span>
<span><span class="co">## fastmap      1.1.1   1.2.0              TRUE</span></span>
<span><span class="co">## promises     1.2.1   1.3.0              TRUE</span></span>
<span><span class="co">## colorspace   2.1-0   2.1-1              TRUE</span></span>
<span><span class="co">## systemfonts  1.0.5   1.1.0              TRUE</span></span>
<span><span class="co">## munsell      0.5.0   0.5.1             FALSE</span></span>
<span><span class="co">## farver       2.1.1   2.1.2              TRUE</span></span>
<span><span class="co">## htmltools    0.5.7 0.5.8.1              TRUE</span></span>
<span><span class="co">## s2           1.1.6   1.1.7              TRUE</span></span>
<span><span class="co">## DBI          1.2.0   1.2.3             FALSE</span></span>
<span><span class="co">## terra       1.7-65  1.7-78              TRUE</span></span>
<span><span class="co">## sp           2.1-2   2.1-4              TRUE</span></span>
<span><span class="co">## fs           1.6.3   1.6.4              TRUE</span></span>
<span><span class="co">## sass         0.4.8   0.4.9              TRUE</span></span>
<span><span class="co">## cachem       1.0.8   1.1.0              TRUE</span></span>
<span><span class="co">## tinytex       0.49    0.52             FALSE</span></span>
<span><span class="co">## bslib        0.6.1   0.8.0             FALSE</span></span>
<span><span class="co">## highr         0.10    0.11             FALSE</span></span>
<span><span class="co">## evaluate      0.23  0.24.0             FALSE</span></span>
<span><span class="co">## yaml         2.3.8  2.3.10              TRUE</span></span>
<span><span class="co">## rmarkdown     2.25    2.27             FALSE</span></span>
<span><span class="co">## knitr         1.45    1.48             FALSE</span></span>
<span><span class="co">## xfun          0.41    0.46              TRUE</span></span>
<span><span class="co">## sfheaders    0.4.3   0.4.4              TRUE</span></span>
<span><span class="co">## geometries   0.2.3   0.2.4              TRUE</span></span>
<span><span class="co">## httpuv      1.6.13  1.6.15              TRUE</span></span>
<span><span class="co">## uuid         1.1-1   1.2-1              TRUE</span></span>
<span><span class="co">## sf          1.0-15  1.0-16              TRUE</span></span>
<span><span class="co">## leaflet      2.2.1   2.2.2             FALSE</span></span>
<span><span class="co">## servr         0.28    0.30             FALSE</span></span>
<span><span class="co">## satellite    1.0.4   1.0.5              TRUE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## The downloaded binary packages are in</span></span>
<span><span class="co">##  /var/folders/54/9kd8nf1x4fnft0ymvb11qmc80000gn/T//Rtmpp2FDB1/downloaded_packages</span></span></code></pre>
<pre><code><span><span class="co">## installing the source packages 'wk', 'fastmap', 'promises', 'colorspace', 'systemfonts', 'munsell', 'farver', 'htmltools', 's2', 'DBI', 'terra', 'sp', 'fs', 'sass', 'cachem', 'tinytex', 'bslib', 'highr', 'evaluate', 'yaml', 'rmarkdown', 'knitr', 'xfun', 'sfheaders', 'geometries', 'httpuv', 'uuid', 'sf', 'leaflet', 'servr', 'satellite'</span></span></code></pre>
<pre><code><span><span class="co">## Warning in i.p(...): installation of package 'terra' had non-zero exit status</span></span></code></pre>
<pre><code><span><span class="co">## Warning in i.p(...): installation of package 'httpuv' had non-zero exit status</span></span></code></pre>
<pre><code><span><span class="co">## Warning in i.p(...): installation of package 'sf' had non-zero exit status</span></span></code></pre>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">──</span> <span style="color: #00BBBB;">R CMD build</span> <span style="color: #00BBBB;">─────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">## * checking for file ‘/private/var/folders/54/9kd8nf1x4fnft0ymvb11qmc80000gn/T/Rtmpp2FDB1/remotes4c6539575f4f/r-spatial-mapview-78945c5/DESCRIPTION’ ... OK</span></span>
<span><span class="co">## * preparing ‘mapview’:</span></span>
<span><span class="co">## * checking DESCRIPTION meta-information ... OK</span></span>
<span><span class="co">## * checking for LF line-endings in source and make files and shell scripts</span></span>
<span><span class="co">## * checking for empty or unneeded directories</span></span>
<span><span class="co">## * building ‘mapview_2.11.2.9000.tar.gz’</span></span></code></pre>
<pre><code><span><span class="co">## Installing package into '/private/var/folders/54/9kd8nf1x4fnft0ymvb11qmc80000gn/T/Rtmpie5FUp/temp_libpath3b62461540c7'</span></span>
<span><span class="co">## (as 'lib' is unspecified)</span></span></code></pre>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">using</span><span class="op">&lt;-</span><span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">libs</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">...</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">req</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">libs</span>,<span class="va">require</span>,character.only<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="va">need</span><span class="op">&lt;-</span><span class="va">libs</span><span class="op">[</span><span class="va">req</span><span class="op">==</span><span class="cn">FALSE</span><span class="op">]</span></span>
<span>    <span class="kw">if</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">need</span><span class="op">)</span><span class="op">&gt;</span><span class="fl">0</span><span class="op">)</span><span class="op">{</span> </span>
<span>        <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="va">need</span><span class="op">)</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">need</span>,<span class="va">require</span>,character.only<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></span>
<span>    <span class="op">}</span></span>
<span><span class="op">}</span></span>
<span><span class="va">packagesInThisExercise</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"tidyverse"</span>, <span class="st">"googlesheets4"</span>, <span class="st">"iNEXT"</span>, <span class="st">"fields"</span>, <span class="st">"sf"</span>, <span class="st">"mapview"</span><span class="op">)</span></span>
<span><span class="fu">using</span><span class="op">(</span><span class="va">packagesInThisExercise</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Loading required package: tidyverse</span></span></code></pre>
<pre><code><span><span class="co">## ── <span style="font-weight: bold;">Attaching core tidyverse packages</span> ──────────────────────── tidyverse 2.0.0 ──</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">dplyr    </span> 1.1.3     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">readr    </span> 2.1.4</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">forcats  </span> 1.0.0     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">stringr  </span> 1.5.0</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">ggplot2  </span> 3.4.4     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tibble   </span> 3.2.1</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">lubridate</span> 1.9.3     <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">tidyr    </span> 1.3.0</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> <span style="color: #0000BB;">purrr    </span> 1.0.2     </span></span>
<span><span class="co">## ── <span style="font-weight: bold;">Conflicts</span> ────────────────────────────────────────── tidyverse_conflicts() ──</span></span>
<span><span class="co">## <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">filter()</span> masks <span style="color: #0000BB;">stats</span>::filter()</span></span>
<span><span class="co">## <span style="color: #BB0000;">✖</span> <span style="color: #0000BB;">dplyr</span>::<span style="color: #00BB00;">lag()</span>    masks <span style="color: #0000BB;">stats</span>::lag()</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Use the conflicted package (<span style="color: #0000BB; font-style: italic;">&lt;http://conflicted.r-lib.org/&gt;</span>) to force all conflicts to become errors</span></span>
<span><span class="co">## Loading required package: googlesheets4</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Loading required package: iNEXT</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Loading required package: fields</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Loading required package: spam</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Spam version 2.9-1 (2022-08-07) is loaded.</span></span>
<span><span class="co">## Type 'help( Spam)' or 'demo( spam)' for a short introduction </span></span>
<span><span class="co">## and overview of this package.</span></span>
<span><span class="co">## Help for individual functions is also obtained by adding the</span></span>
<span><span class="co">## suffix '.spam' to the function name, e.g. 'help( chol.spam)'.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Attaching package: 'spam'</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## The following objects are masked from 'package:base':</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##     backsolve, forwardsolve</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Loading required package: viridisLite</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Try help(fields) to get started.</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Loading required package: sf</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Linking to GEOS 3.10.2, GDAL 3.4.2, PROJ 8.2.1; sf_use_s2() is TRUE</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Loading required package: mapview</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Error: package or namespace load failed for 'mapview' in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]):</span></span>
<span><span class="co">##  namespace 'htmltools' 0.5.6.1 is already loaded, but &gt;= 0.5.7 is required</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Installing package into '/private/var/folders/54/9kd8nf1x4fnft0ymvb11qmc80000gn/T/Rtmpie5FUp/temp_libpath3b62461540c7'</span></span>
<span><span class="co">## (as 'lib' is unspecified)</span></span></code></pre>
<pre><code><span><span class="co">## </span></span>
<span><span class="co">## The downloaded binary packages are in</span></span>
<span><span class="co">##  /var/folders/54/9kd8nf1x4fnft0ymvb11qmc80000gn/T//Rtmpp2FDB1/downloaded_packages</span></span></code></pre>
<pre><code><span><span class="co">## Loading required package: mapview</span></span>
<span><span class="co">## Error: package or namespace load failed for 'mapview' in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]):</span></span>
<span><span class="co">##  namespace 'htmltools' 0.5.6.1 is already loaded, but &gt;= 0.5.7 is required</span></span></code></pre>
<pre><code><span><span class="co">## [[1]]</span></span>
<span><span class="co">## [1] FALSE</span></span></code></pre>
<div class="section level3">
<h3 id="measuring-communities-through-camera-traps">Measuring communities through camera traps<a class="anchor" aria-label="anchor" href="#measuring-communities-through-camera-traps"></a>
</h3>
<p>Camera traps are a great way to monitor species &amp; communities.
They are minimally invasive &amp; provide a way to see what animals are
doing without interfering with them. They can be deployed for long
periods of time (our models will run for ~10 months on 1 set of
batteries), making them a time and cost effective method for monitoring
medium to large sized mammals.</p>
<p>We’ll explore how to organize and interpret data from camera traps by
first using some public data downloaded from eMammal that were taken in
several habitats in Florida, including Bottomland Hardwood Forest
(BLHF). This is the habitat best represented by North Oak Park. We’ll
compare the BLHF to other habitats in Florida to get a sense of overall
mammal richness, abundance, and diversity.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Download a Google Sheet of the data. FYI This will take a few minutes.</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://googlesheets4.tidyverse.org" class="external-link">googlesheets4</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://googlesheets4.tidyverse.org/reference/gs4_deauth.html" class="external-link">gs4_deauth</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">cam</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://googlesheets4.tidyverse.org/reference/range_read.html" class="external-link">read_sheet</a></span><span class="op">(</span><span class="st">"https://docs.google.com/spreadsheets/d/1esrbC-QqoufjlDHXtIYtDcsXovC_x6o6Z4JfBPKvg3s/edit?usp=sharing"</span><span class="op">)</span></span></code></pre></div>
<p>Let’s have a quick look at what we have in these data</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">cam</span><span class="op">)</span> <span class="co">#Dimensions of cam. How many rows &amp; columns.</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] 8683   18</span></span></code></pre>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cam</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "Project"                   "Subproject"               </span></span>
<span><span class="co">##  [3] "Treatment"                 "Deployment Name"          </span></span>
<span><span class="co">##  [5] "ID Type"                   "Deployment ID"            </span></span>
<span><span class="co">##  [7] "Sequence ID"               "Begin Time"               </span></span>
<span><span class="co">##  [9] "End Time"                  "Species Name"             </span></span>
<span><span class="co">## [11] "Common Name"               "Age"                      </span></span>
<span><span class="co">## [13] "Sex"                       "Individually Identifiable"</span></span>
<span><span class="co">## [15] "Count"                     "Actual Lat"               </span></span>
<span><span class="co">## [17] "Actual Lon"                "Fuzzed"</span></span></code></pre>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cam</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 8,683 × 18</span></span></span>
<span><span class="co">##    Project      Subproject Treatment `Deployment Name` `ID Type` `Deployment ID`</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>         </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> Okaloosa S.… Florida B… <span style="color: #BB0000;">NA</span>        SQ66_Cam393       Research… <span style="color: #949494;">&lt;dbl [1]&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> Okaloosa S.… Florida B… <span style="color: #BB0000;">NA</span>        SQ66_Cam393       Research… <span style="color: #949494;">&lt;dbl [1]&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> Okaloosa S.… Florida B… <span style="color: #BB0000;">NA</span>        SQ66_Cam393       Research… <span style="color: #949494;">&lt;dbl [1]&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> Okaloosa S.… Florida B… <span style="color: #BB0000;">NA</span>        SQ66_Cam393       Research… <span style="color: #949494;">&lt;dbl [1]&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> Okaloosa S.… Florida U… <span style="color: #BB0000;">NA</span>        SQ122_Cam279      Research… <span style="color: #949494;">&lt;dbl [1]&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> Okaloosa S.… Florida U… <span style="color: #BB0000;">NA</span>        SQ122_Cam279      Research… <span style="color: #949494;">&lt;dbl [1]&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> Okaloosa S.… Florida U… <span style="color: #BB0000;">NA</span>        SQ122_Cam279      Research… <span style="color: #949494;">&lt;dbl [1]&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> Okaloosa S.… Florida U… <span style="color: #BB0000;">NA</span>        SQ122_Cam279      Research… <span style="color: #949494;">&lt;dbl [1]&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> Okaloosa S.… Florida U… <span style="color: #BB0000;">NA</span>        SQ122_Cam279      Research… <span style="color: #949494;">&lt;dbl [1]&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> Okaloosa S.… Florida U… <span style="color: #BB0000;">NA</span>        SQ122_Cam279      Research… <span style="color: #949494;">&lt;dbl [1]&gt;</span>      </span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 8,673 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 12 more variables: `Sequence ID` &lt;chr&gt;, `Begin Time` &lt;list&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   `End Time` &lt;list&gt;, `Species Name` &lt;chr&gt;, `Common Name` &lt;chr&gt;, Age &lt;chr&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   Sex &lt;chr&gt;, `Individually Identifiable` &lt;chr&gt;, Count &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   `Actual Lat` &lt;dbl&gt;, `Actual Lon` &lt;dbl&gt;, Fuzzed &lt;lgl&gt;</span></span></span></code></pre>
<p>There are a lot of column names that have spaces in them. This is
fine for the tidyverse tibble that the data currently occupy, but R
hates spaces, and are a pain for typing out since they would need quotes
around them all of the time. We’ll change the column names into
something that is easier to use later. We’ll also clean up the names of
the Subprojects.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cam</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/make.names.html" class="external-link">make.names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">cam</span><span class="op">)</span>, unique <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="co">#create good names without spaces</span></span>
<span></span>
<span><span class="co">#We need to clean up names and get rid of spaces. These search for spaces in the given column names and replace them with periods</span></span>
<span><span class="va">cam</span><span class="op">$</span><span class="va">Species.Name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace_all</a></span><span class="op">(</span><span class="va">cam</span><span class="op">$</span><span class="va">Species.Name</span>, <span class="st">" "</span>, <span class="st">"."</span><span class="op">)</span></span>
<span><span class="va">cam</span><span class="op">$</span><span class="va">Common.Name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace_all</a></span><span class="op">(</span><span class="va">cam</span><span class="op">$</span><span class="va">Common.Name</span>, <span class="st">" "</span>, <span class="st">"."</span><span class="op">)</span></span>
<span><span class="va">cam</span><span class="op">$</span><span class="va">Subproject</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace_all</a></span><span class="op">(</span><span class="va">cam</span><span class="op">$</span><span class="va">Subproject</span>, <span class="st">" "</span>, <span class="st">"."</span><span class="op">)</span></span>
<span><span class="va">cam</span><span class="op">$</span><span class="va">Subproject</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_replace.html" class="external-link">str_replace_all</a></span><span class="op">(</span><span class="va">cam</span><span class="op">$</span><span class="va">Subproject</span>, <span class="st">"/"</span>, <span class="st">"."</span><span class="op">)</span> <span class="co">#there is one subproject name that has a /. Let's just change it to a period for consistency's sake.</span></span></code></pre></div>
<p>I want to start summarizing some of the data into counts of each
species type per subproject (or forest type). I only need a few of the
columns, so I’m going to select those first so that I can count up the
number of species found in each subproject. This will give a table with
species as rows and Subprojects as columns. I have set it up this way
because the package that we’ll use to analyze diversity
<code>iNEXT</code> requires this format.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speciesCount</span> <span class="op">&lt;-</span> <span class="va">cam</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Common.Name</span>, <span class="va">Count</span>, <span class="va">Subproject</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Common.Name</span>, <span class="va">Subproject</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co">#Here I group the data by species and the subproject</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>totalCount <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">Count</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co">#This now gives the sum of the count of each species per subproject</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/spread.html" class="external-link">spread</a></span><span class="op">(</span><span class="va">Subproject</span>, <span class="va">totalCount</span><span class="op">)</span> <span class="co">#Now I need to change the orientation so that species are rows and subprojects are columns. This pivots the table to do that. More explanation here: https://rpubs.com/bradleyboehmke/data_wrangling</span></span>
<span><span class="va">speciesCount</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 40 × 6</span></span></span>
<span><span class="co">## <span style="color: #949494;"># Groups:   Common.Name [40]</span></span></span>
<span><span class="co">##    Common.Name   Florida.Bottomland.H…¹ Florida.Coastal.Fore…² Florida.Developed</span></span>
<span><span class="co">##    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 1</span> American.Bla…                     30                     <span style="color: #BB0000;">NA</span>                 1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 2</span> Animal.Not.o…                     <span style="color: #BB0000;">NA</span>                      2                <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 3</span> Bobcat                            20                      8                 1</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 4</span> Calibration.…                     10                      2                <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 5</span> Camera.Misfi…                    418                      1                <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 6</span> Camera.Trapp…                    402                     52                29</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 7</span> Coyote                            44                     31                 8</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 8</span> Domestic.Cat                      <span style="color: #BB0000;">NA</span>                     22                18</span></span>
<span><span class="co">## <span style="color: #BCBCBC;"> 9</span> Domestic.Dog                      11                     12                37</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">10</span> Domestic.Hor…                      1                     <span style="color: #BB0000;">NA</span>                <span style="color: #BB0000;">NA</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 30 more rows</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ abbreviated names: ¹​Florida.Bottomland.Hardwood.Forest,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   ²​Florida.Coastal.Forest.Dunes</span></span></span>
<span><span class="co">## <span style="color: #949494;"># ℹ 2 more variables: Florida.Upland.Hardwood.Forest &lt;dbl&gt;,</span></span></span>
<span><span class="co">## <span style="color: #949494;">#   Florida.Upland.Pine.Sandhill &lt;dbl&gt;</span></span></span></code></pre>
<p>This now tells us how many times each species appeared on a photo
sequence in each location. In our study of North Oak Park, you could
substitute camera for subproject to see counts per camera location.</p>
</div>
<div class="section level3">
<h3 id="richness-abundance-diversity">Richness, Abundance, &amp; Diversity<a class="anchor" aria-label="anchor" href="#richness-abundance-diversity"></a>
</h3>
<p>There are a few ways to think about communities of species and their
composition. <strong>Richness</strong> is just the number of species
that are present at site. This is an easy one – we can just count those
up. <strong>Abundance</strong> is the number of individuals of each
species in a site. This takes a bit to calculate.
<strong>Diversity</strong> is a combination of richness &amp; abundance.
It can be calculated in a few different ways, but defines the different
number of species in an area (richness) and its abundance and the
distribution of these species in that ecosystem. It’s a measure of the
variety in the ecosystem.</p>
<p>Diversty in an ecological community can tell you a lot about what
kind of community it is. Does it have a lot of different kinds of
opportunities &amp; ecological niches? Are there many types of feeding
and resting habitats available?</p>
<p>In this exercise we’ll calculate different diversity metrics to
understand how mammal communities can change. We’ll use the package
<code>iNEXT</code> to do this. This program calculates Hill numbers that
allow us to compare communities of different sizes. Hill numbers are the
<em>effective number of species</em> and can be a direct reflection of
older diversity metrics, but are a better measure of diversity because
the non-linearity of other diversity indices (like the Shannon Diversity
Index), makes it difficult to really interpret the values across many
studies. Hill numbers are more straight-forward. A nice set of examples
and discussion here: <a href="https://jonlefcheck.net/2012/10/23/diversity-as-effective-numbers/" class="external-link uri">https://jonlefcheck.net/2012/10/23/diversity-as-effective-numbers/</a>.</p>
<div class="section level5">
<h5 id="abundance">Abundance<a class="anchor" aria-label="anchor" href="#abundance"></a>
</h5>
<p>First, we’ll calculate simple <strong>Abundance</strong> for each
Subproject / Forest Type</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">abundance</span> <span class="op">&lt;-</span> <span class="va">cam</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Subproject</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">Species.Name</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>  <span class="co">#filter out any NAs in the species name, just in case</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>SpeciesAbundance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">Species.Name</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">abundance</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #949494;"># A tibble: 5 × 2</span></span></span>
<span><span class="co">##   Subproject                         SpeciesAbundance</span></span>
<span><span class="co">##   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                                         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">## <span style="color: #BCBCBC;">1</span> Florida.Bottomland.Hardwood.Forest               33</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">2</span> Florida.Coastal.Forest.Dunes                     20</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">3</span> Florida.Developed                                25</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">4</span> Florida.Upland.Hardwood.Forest                   29</span></span>
<span><span class="co">## <span style="color: #BCBCBC;">5</span> Florida.Upland.Pine.Sandhill                     28</span></span></code></pre>
<p>We can see that each of the forests has 20 - 30 (ish) species, but we
have no idea about the diversity, evenness, or overlap among those
species. For all we know those data sets could be made of 97%
white-tailed deer and 1 photo sequence each of another 18 - 32 mammal
species. We can turn to <code>iNext</code> to figure some of this out.
FYI, there are supposed to be 80 terrestrial mammal species in all of
Florida, including bats &amp; rodents that camera traps most likely
wouldn’t capture.</p>
<p>To make our data play nicely with <code>iNEXT</code>, it needs to be
transformed slightly. This is done below.</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speciesCount</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">speciesCount</span><span class="op">)</span><span class="op">]</span><span class="op">=</span><span class="fl">0</span> <span class="co">#This turns the NAs that come from summing 0's into real 0's for analysis</span></span>
<span><span class="va">camDiv</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="va">speciesCount</span><span class="op">)</span> <span class="co">#Since iNext wants a data frame, turn the tibble into one</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">camDiv</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">camDiv</span><span class="op">$</span><span class="va">Common.Name</span> <span class="co">#iNext also wants the species ID as row names. </span></span>
<span><span class="va">camDiv</span> <span class="op">&lt;-</span> <span class="va">camDiv</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">6</span><span class="op">]</span> <span class="co">#Now we can get rid of the species name since it's already in our row name.</span></span></code></pre></div>
<p>Now that the data are in a format <code>iNEXT</code> likes, we can
calculate species <strong>Richness</strong>. Because our data are
counts, the data type is abundance. Hill numbers are calculated as:
<span class="math display">\[^{q}D =
(\sum_{i=1}^{S}p_{i})^{1/(1-q)}\]</span></p>
<p>Where: <em>S</em> is the number of species in the assemblage and each
<em>i</em> species has the relative abundance <span class="math inline">\(p_{i}\)</span>. By changing the exponent
<em>q</em> we change how sensitive the equation is to relative
frequencies and therefore the shape of the distribution and what it
represents. <em>q</em> = 0 is Richness, <em>q</em> = 1 is the Shannon
Diversity index, and <em>q</em> = 2 is the Simpson’s Diversity index.
More on those below.</p>
</div>
<div class="section level5">
<h5 id="richness">Richness<a class="anchor" aria-label="anchor" href="#richness"></a>
</h5>
<p>So, we can calculate species <strong>Richness</strong> and then plot
richness for each forest.</p>
<div class="sourceCode" id="cb32"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">richness</span> <span class="op">&lt;-</span> <span class="fu">iNEXT</span><span class="op">(</span><span class="va">camDiv</span>, q<span class="op">=</span><span class="fl">0</span>, datatype <span class="op">=</span> <span class="st">"abundance"</span><span class="op">)</span> <span class="co">#This calculates hill numbers for the number of observations we have. q changes the expected relationship. 0 will give Richness</span></span>
<span><span class="fu">ggiNEXT</span><span class="op">(</span><span class="va">richness</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="11_iNEXT_files/figure-html/unnamed-chunk-7-1.png" width="700"></p>
</div>
<div class="section level5">
<h5 id="diversity">Diversity<a class="anchor" aria-label="anchor" href="#diversity"></a>
</h5>
<p>The first diversity index that Hill numbers calculate is equivalent
to the Shannon Diversity Index. This counts all species equally, so
diversity is calculated in proportion to its abundance.</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diversity_Shan</span> <span class="op">&lt;-</span> <span class="fu">iNEXT</span><span class="op">(</span><span class="va">camDiv</span>, q<span class="op">=</span><span class="fl">1</span>, datatype <span class="op">=</span> <span class="st">"abundance"</span><span class="op">)</span> <span class="co">#This calculates hill numbers for the number of observations we have. q changes the expected relationship. q=1 gives the Shannon Diversity index. </span></span>
<span><span class="fu">ggiNEXT</span><span class="op">(</span><span class="va">diversity_Shan</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="11_iNEXT_files/figure-html/unnamed-chunk-8-1.png" width="700"></p>
<p>The next diversity index is Simpson’s Diversity Index. This discounts
all but the most common species.</p>
<div class="sourceCode" id="cb34"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">diversity_Simps</span> <span class="op">&lt;-</span> <span class="fu">iNEXT</span><span class="op">(</span><span class="va">camDiv</span>, q<span class="op">=</span><span class="fl">2</span>, datatype <span class="op">=</span> <span class="st">"abundance"</span><span class="op">)</span> <span class="co">#This calculates hill numbers for the number of observations we have. q changes the expected relationship. q=2 gives the Simpsons Diversity index.  </span></span>
<span><span class="fu">ggiNEXT</span><span class="op">(</span><span class="va">diversity_Simps</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"right"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="11_iNEXT_files/figure-html/unnamed-chunk-9-1.png" width="700"></p>
<p>These can also all be run at the same time and we can look at the
effects of each diversity calculation (<em>q</em>) within each site</p>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">allDiversity</span> <span class="op">&lt;-</span> <span class="fu">iNEXT</span><span class="op">(</span><span class="va">camDiv</span>, q<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span>, datatype<span class="op">=</span><span class="st">"abundance"</span>, endpoint<span class="op">=</span><span class="fl">7000</span><span class="op">)</span></span>
<span><span class="fu">ggiNEXT</span><span class="op">(</span><span class="va">allDiversity</span>, type<span class="op">=</span><span class="fl">1</span>, facet.var<span class="op">=</span><span class="st">"site"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_classic</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in ggiNEXT.iNEXT(allDiversity, type = 1, facet.var = "site"): invalid facet variable</span></span></code></pre>
<p><strong>Questions</strong></p>
<ol style="list-style-type: decimal">
<li>Which habitats have the largest number of species?<br><p style="color:blue">
</p>
</li>
<li>What do you notice about the differences between the Shannon
(<em>q</em>=1) &amp; Simpson’s (<em>1</em>=2) Diversity indices? Is
their relationship (e.g., distance between them) consistent across
sites?<br><p style="color:blue">
</p>
</li>
<li>Are abundance, richness, and diversity closely related to each other
in these systems? Are habitats with the highest abundances the most
diverse? Why or why not?<br><p style="color:blue">
</p>
 ###Plotting our data in space These are data that were
collected in a spatial context, so why not make a map? We have the
latitude &amp; longitude of each camera, so they can be plotted and
colored by their habitat typel</li>
</ol>
<p>#Let’s plot by deployments location and total number of species</p>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">cam</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Actual.Lon</span>, y<span class="op">=</span><span class="va">Actual.Lat</span>, color <span class="op">=</span> <span class="va">Subproject</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<img src="11_iNEXT_files/figure-html/unnamed-chunk-11-1.png" width="700"><strong>Question</strong> 4. Are these habitats spread out or clustered
together? Do you think this has any impact on the diversity
measures?<br><p style="color:blue">
</p>
<p><br>
We can also plot the location of each camera scaled by the number of
animals observed at that spot and colored by the habitat. We need to do
a bit of summarizing first.</p>
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">deployCount</span> <span class="op">&lt;-</span> <span class="va">cam</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Common.Name</span>, <span class="va">Count</span>, <span class="va">Deployment.ID</span>, <span class="va">Actual.Lon</span>, <span class="va">Actual.Lat</span>, <span class="va">Subproject</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Deployment.ID</span>, <span class="va">Actual.Lon</span>, <span class="va">Actual.Lat</span>, <span class="va">Subproject</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>totalCount <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">Count</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">deployCount</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x<span class="op">=</span><span class="va">Actual.Lon</span>, y<span class="op">=</span><span class="va">Actual.Lat</span>, size<span class="op">=</span><span class="va">totalCount</span>, color<span class="op">=</span><span class="va">Subproject</span><span class="op">)</span>, alpha<span class="op">=</span><span class="fl">0.5</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_bw</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="11_iNEXT_files/figure-html/unnamed-chunk-12-1.png" width="700"></p>
<p>Lastly, we can plot those data in a zoomable, interactive map</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/mapview" class="external-link">mapview</a></span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error: package or namespace load failed for 'mapview' in loadNamespace(i, c(lib.loc, .libPaths()), versionCheck = vI[[i]]):</span></span>
<span><span class="co">##  namespace 'htmltools' 0.5.6.1 is already loaded, but &gt;= 0.5.7 is required</span></span></code></pre>
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#Transform these objects into something that can be plotted with the package {sf}</span></span>
<span><span class="va">deployCount_sf</span> <span class="op">&lt;-</span> <span class="va">deployCount</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_as_sf.html" class="external-link">st_as_sf</a></span><span class="op">(</span>coords <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Actual.Lon"</span>, <span class="st">"Actual.Lat"</span><span class="op">)</span>, crs<span class="op">=</span><span class="fl">4326</span><span class="op">)</span></span>
<span></span>
<span><span class="va">camMap</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/mapview/man/mapView.html" class="external-link">mapview</a></span><span class="op">(</span><span class="va">deployCount_sf</span>, zcol<span class="op">=</span><span class="st">"Subproject"</span>, cex<span class="op">=</span><span class="st">"totalCount"</span>, layer.name <span class="op">=</span> <span class="st">"Habitat Type"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in mapview(deployCount_sf, zcol = "Subproject", cex = "totalCount", : could not find function "mapview"</span></span></code></pre>
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">camMap</span></span></code></pre></div>
<pre><code><span><span class="co">## Error in eval(expr, envir, enclos): object 'camMap' not found</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="nmds">NMDS<a class="anchor" aria-label="anchor" href="#nmds"></a>
</h2>
<p>A better way to look at these data rather than a simple plot might be
the non-metric multidimensional scaling (NMDS). NMDS is used for
situations with many dimensions of variation. We can make univariate
comparsions between populations easily. In fact, you just saw this -
most of our diversity indices collapse all the information associated
with diversity into a single value.</p>
<p>We might be interested, however, in how community compositions
themselves change. This inherently involves looking at more data and
more variables, and involves what we might call ‘multivariate
comparisons’. By their nature, these are more complex comparisons, but
there are some tools for making these comparisons that aren’t too
unituitive.</p>
<p>NMDS is one such technique. We can compute raw abundances for our
data. We can also rank which species are the most abundant per
community. Doing so has the effect of making the NMDS more robust to
missing data. NMDS also does not assume a Euclidean distance (as PCA
might), making it flexible to different kinds of dissimilarity metrics
between populations.</p>
<p>What we’ll be doing in this lesson is using our data from the
previous steps to construct an NMDS plot. Broadly, this will involve
defining where communities sit in composition space by themselves and in
relation to one another, and then quantifying the goodness of fit of the
model to the data (stress).</p>
<p>One of the most famous packages for doing this is
<code>vegan</code>.</p>
<div class="sourceCode" id="cb45"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#install.packages("vegan")</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/vegandevs/vegan" class="external-link">vegan</a></span><span class="op">)</span></span></code></pre></div>
<p>Vegan takes community compositions as a matrix. We can modify our
command from earlier. Vegan will expect the species names to be the
columns and the site to be the row:</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">speciesCount</span> <span class="op">&lt;-</span> <span class="va">cam</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">Common.Name</span>, <span class="va">Count</span>, <span class="va">Subproject</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">Common.Name</span>, <span class="va">Subproject</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co">#Here I group the data by species and the subproject</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span>totalCount <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">Count</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="co">#This now gives the sum of the count of each species per subproject</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/spread.html" class="external-link">spread</a></span><span class="op">(</span><span class="va">Common.Name</span>, <span class="va">totalCount</span>, fill <span class="op">=</span> <span class="fl">0</span><span class="op">)</span> </span>
<span></span>
<span><span class="va">speciesMatrix</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.matrix.html" class="external-link">data.matrix</a></span><span class="op">(</span><span class="va">speciesCount</span>, rownames.force <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">cam</span><span class="op">$</span><span class="va">Subproject</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Next, we perform the NMDS:</p>
<div class="sourceCode" id="cb47"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cam_trap_NMDS</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/vegan/man/metaMDS.html" class="external-link">metaMDS</a></span><span class="op">(</span><span class="va">speciesMatrix</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Square root transformation</span></span>
<span><span class="co">## Wisconsin double standardization</span></span>
<span><span class="co">## Run 0 stress 0 </span></span>
<span><span class="co">## Run 1 stress 0 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.1122361  max resid 0.1709211 </span></span>
<span><span class="co">## Run 2 stress 0 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.07444285  max resid 0.08249458 </span></span>
<span><span class="co">## Run 3 stress 0 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.1218095  max resid 0.1558595 </span></span>
<span><span class="co">## Run 4 stress 9.999863e-05 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.02932956  max resid 0.04265066 </span></span>
<span><span class="co">## Run 5 stress 0.1859594 </span></span>
<span><span class="co">## Run 6 stress 8.010416e-05 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.1127147  max resid 0.1574426 </span></span>
<span><span class="co">## Run 7 stress 7.688356e-05 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.1067923  max resid 0.168388 </span></span>
<span><span class="co">## Run 8 stress 0.1573461 </span></span>
<span><span class="co">## Run 9 stress 9.467136e-05 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.129562  max resid 0.1774468 </span></span>
<span><span class="co">## Run 10 stress 0 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.05607449  max resid 0.06467418 </span></span>
<span><span class="co">## Run 11 stress 8.853772e-05 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.1301699  max resid 0.1785759 </span></span>
<span><span class="co">## Run 12 stress 0.2582026 </span></span>
<span><span class="co">## Run 13 stress 8.713315e-05 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.1192792  max resid 0.1541592 </span></span>
<span><span class="co">## Run 14 stress 0 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.149973  max resid 0.2302017 </span></span>
<span><span class="co">## Run 15 stress 0 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.1256767  max resid 0.1557277 </span></span>
<span><span class="co">## Run 16 stress 0.1573461 </span></span>
<span><span class="co">## Run 17 stress 9.396092e-05 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.0553297  max resid 0.08147343 </span></span>
<span><span class="co">## Run 18 stress 0.1573461 </span></span>
<span><span class="co">## Run 19 stress 0 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.04569697  max resid 0.05501658 </span></span>
<span><span class="co">## Run 20 stress 0 </span></span>
<span><span class="co">## ... Procrustes: rmse 0.04996614  max resid 0.05911155 </span></span>
<span><span class="co">## *** Best solution was not repeated -- monoMDS stopping criteria:</span></span>
<span><span class="co">##     15: stress &lt; smin</span></span>
<span><span class="co">##      2: stress ratio &gt; sratmax</span></span>
<span><span class="co">##      3: scale factor of the gradient &lt; sfgrmin</span></span></code></pre>
<p>You will notice this tells us some output. The first is that the
differences between communities is calculated by the Bray-Curtis
distance. This is a popular distance because it is not affected by
changes in unit, it isn’t affected if one species is present or absent
in one community, it can scale to multiple populations, and it can react
to differences in raw abunances even if relative abundance change. It
looks like this:</p>
<p>{BC_{ij}=1-{}}</p>
<p>In which C is the sum of the least common species abundance in
populations i and j. For example, if each population has two species,
the less abundant count would be summed for both populations. <span class="math inline">\(S_i\)</span> is the number of individuals in
population 1 and <span class="math inline">\(S_j\)</span> is this
quantity for population 2. If, in our two populations there are 10
robins and 5 cardinals in population one, and 5 robins and 8 cardinals
in population 2, this will be</p>
<p>{BC_{ij}=1-{}}</p>
<p>Next, you will note that the calculation tells us there is no stress
associated with our calculation, and that this is a bad thing. You might
think no stress is a <em>good</em> thing. But actually, when we go from
three-dimensional data to two dimensional data, we lose information.
Think about going from a globe to a map.</p>
<p>If we have no stress, that means there is no loss of information.
This indicates we probably don’t have much information in the data. We
can view this on a plot.</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/vegan/man/goodness.metaMDS.html" class="external-link">stressplot</a></span><span class="op">(</span><span class="va">cam_trap_NMDS</span><span class="op">)</span></span></code></pre></div>
<p><img src="11_iNEXT_files/figure-html/unnamed-chunk-17-1.png" width="700">
Here, all of our points (blue circles) are right on the red line. Our
<span class="math inline">\(R^2\)</span> is very high, indicating good
fit. So we can fit the model, but there’s little information in it - we
might not have widely generalizeable results from these data.</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/vegan/man/ordiplot.html" class="external-link">ordiplot</a></span><span class="op">(</span><span class="va">cam_trap_NMDS</span>,type<span class="op">=</span><span class="st">"n"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/vegan/man/orditorp.html" class="external-link">orditorp</a></span><span class="op">(</span><span class="va">cam_trap_NMDS</span>,display<span class="op">=</span><span class="st">"species"</span>,col<span class="op">=</span><span class="st">"red"</span>,air<span class="op">=</span><span class="fl">0.01</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/vegan/man/orditorp.html" class="external-link">orditorp</a></span><span class="op">(</span><span class="va">cam_trap_NMDS</span>,display<span class="op">=</span><span class="st">"sites"</span>,cex<span class="op">=</span><span class="fl">1.25</span>,air<span class="op">=</span><span class="fl">0.01</span><span class="op">)</span></span></code></pre></div>
<p><img src="11_iNEXT_files/figure-html/unnamed-chunk-18-1.png" width="700">
Oh, that’s hideous. What this is showing us is similarity between
populations - the closer together they are, the more similar the species
compositions. The species that characterize these communities is printed
in red, but it is hard to see.</p>
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cols</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'red'</span>, <span class="st">'black'</span>, <span class="st">'blue'</span>, <span class="st">'green'</span>, <span class="st">'orange'</span><span class="op">)</span></span>
<span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">speciesCount</span><span class="op">$</span><span class="va">Subproject</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/vegan/man/ordiplot.html" class="external-link">ordiplot</a></span><span class="op">(</span><span class="va">cam_trap_NMDS</span>,type<span class="op">=</span><span class="st">"text"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/vegan/man/orditorp.html" class="external-link">orditorp</a></span><span class="op">(</span><span class="va">cam_trap_NMDS</span>,display<span class="op">=</span><span class="st">"sites"</span>,cex<span class="op">=</span><span class="fl">1.25</span>,air<span class="op">=</span><span class="fl">0.01</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span><span class="va">cam_trap_NMDS</span>, display <span class="op">=</span> <span class="st">'sites'</span><span class="op">)</span></span></code></pre></div>
<p><img src="11_iNEXT_files/figure-html/unnamed-chunk-19-1.png" width="700"></p>
<p>We can also do something a bit nicer. In this case, we take our
points and export them to ggplot to make a figure.</p>
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data.scores</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/pkg/vegan/man/scores.html" class="external-link">scores</a></span><span class="op">(</span><span class="va">cam_trap_NMDS</span><span class="op">)</span><span class="op">$</span><span class="va">sites</span><span class="op">)</span></span>
<span><span class="va">names</span> <span class="op">&lt;-</span> <span class="va">data.scores</span>  <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>Location  <span class="op">=</span> <span class="va">speciesCount</span><span class="op">$</span><span class="va">Subproject</span><span class="op">)</span></span>
<span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">names</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">NMDS1</span>, y <span class="op">=</span> <span class="va">NMDS2</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">4</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>colour <span class="op">=</span> <span class="va">Location</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">plot</span></span></code></pre></div>
<p><img src="11_iNEXT_files/figure-html/unnamed-chunk-20-1.png" width="700"></p>
</div>
<div class="section level2">
<h2 id="exploration">Exploration<a class="anchor" aria-label="anchor" href="#exploration"></a>
</h2>
<div class="section level4">
<h4 id="now-its-your-turn">Now it’s your turn<a class="anchor" aria-label="anchor" href="#now-its-your-turn"></a>
</h4>
<p>Here is a link to last year’s camera data from North Oak Park</p>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">nop</span> <span class="op">&lt;-</span> <span class="va">cam</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://googlesheets4.tidyverse.org/reference/range_read.html" class="external-link">read_sheet</a></span><span class="op">(</span><span class="st">"https://docs.google.com/spreadsheets/d/18yhZcaiYt6llg84eZYrNEewuLP3xaEyxYQQN__RQ3_4/edit?usp=sharing"</span><span class="op">)</span></span></code></pre></div>
<p>Using these data, copy and modify whatever code you need from above
(or from the past assignments) to accomplish the following tasks. Make
sure you show the code that will output the correct answers and provide
any interpretation that’s needed.</p>
<ol start="5" style="list-style-type: decimal">
<li>Which cameras captured the most deer? Show me on a ggplot. To do
this you will need to calculate the sum for each species per camera
(think grouping), then filter these for deer only. Then plot these data
using ggplot with the camera locations on the x-axis (longitude) and
y-axis (latitude), and scale the size or color by the number of deer
captured.</li>
</ol>
<p> 6. Where was the highest diversity, measured by the
Shannon’s Diversity Index, in the forest? Show me on a map with
ggplot.</p>
 7. What do you see from the map of diversity at each camera
site? Are there any patterns? FYI, the site locations are the same (but
their names are different).
<p style="color:blue">
</p>
 8. What other kinds of information would you want to know to
understand the forest dynamics a bit more and its relationship with its
surroundings?
<p style="color:blue">
</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by April Wright.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
